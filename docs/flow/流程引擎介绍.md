# 流程引擎介绍

[toc]

本次分享，会带大家一起学习下流程引擎相关知识，在分享过程中，如果有讲解错误，或有相关疑问，大家可以随时打断互相交流。

## 一、流程引擎发展历史

[工作流之间的较量.md](/Users/hhh/workspace/gitbook/docs/flow/工作流之间的较量.md)

## 二、后台代码层面展示基础审批流

### Activiti

- 在Activiti后台源码层面，部署一个基础的请假申请单流程
- 整合Springboot，跑一个基础的请假单流程

### Flowable

- 在Flowable后台源码层面，部署一个基础的请假单申请流程
- 整合Springboot，跑一个基础的请假单流程

### Camunda

- 在Camunda源码层面部署一个基础请假单申请流程
- 整合Springboot，跑一个基础的请假单流程

## 三、真实工作场景

### Flowable-UI

- Fowable-UI展示，绘制一个请假申请单
- Fowable-UI创建用户，分配权限
- 创建应用，走完一个流程

Flowable-ui可以直接嵌入我们的应用，只需二开一小部分

### Camunda-webapps

- Camunda-webapps构建，展示Camunda-webapps UI
- Camunda-webapps使用J2EE相关框架实现，不适合二开与使用

## 四、流程演示

- 请假申请单-》包含决策表-〉表单（用户发起流程）
- 使用消息启动事件，模拟业务流程触发，模拟自动分配用户，自动执行脚本（通过消息收到业务流程）
- 流程回退（串行流程回退）

## 五、案例分享

### 具体业务需求分享

在前面展示的请假单流程中，只是展示了流程引擎，审批流的部分功能，使用流程引擎做审批流，其实只是流程引擎最表面的使用。流程引擎更多的功能，还是流程定制，将一个非常复杂的需求，按照流程拆解，实现代码流程的可视化。

拿一个需求举例子，大家应该可以比较好理解：

下面的例子，阐述了一个商品数据同步的例子，在下面流程中，设计到非常多的自定义的流程，需要自动化流程服务介入

- 配置自动审核规则，不符合规则在人工介入
- 业务定制的规则，也需要代码进行自动化分配，其中会涉及到许多的微服务调用等复杂逻辑
- 一个组审核完成后，需要自动分配给下一个组审核
- 每个组可以配置自己审核完成后的特殊逻辑，例如留下审计日志，对于特殊商品，需要做一个特殊的处理
- 比如在数据给到业务层，业务层可以定制规则，生鲜公司的商品规格进行自动分配，然后回传回去
- 在数据审核完成，因为涉及到多个系统，那么需要做失败后的数据补偿，也需要代码介入
- 使用流程引擎去设计这个需求，就可以实现商品数据同步流程的可视化，业务人员可以知道，我这张商品申请单，现在走到了哪里，审核到了什么阶段，为什么同步失败，为什么被驳回，如果没有流程引擎提供的流程可视化，纯硬编码，就会导致流程的可扩展性非常差，在加入其他的公司，就变得非常困难

![image-20220410163410293](/Users/hhh/Library/Application Support/typora-user-images/image-20220410163410293.png)

### Zeebe

使用流程引擎进行服务编排



